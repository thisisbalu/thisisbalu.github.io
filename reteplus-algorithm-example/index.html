<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>RetePlus Algorithm with Example – IBM ODM | Bala Subramanyam Lanka</title> <meta name="author" content="Bala Subramanyam Lanka"> <meta name="description" content="RetePlus algorithm is one of the execution modes in IBM ODM which is based on Rete algorithm. It works based on working memory, agenda creation, supports negative patterns, object notification, and Logical Objects."> <meta name="keywords" content="balasubramanyamlanka, lbs, technology, resume, balu, balu-website, balasubramanyamlanka-resume, blog, java, scaling"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/main/favicon.png?d375935be3581fdc7922f5745994398a"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://balasubramanyamlanka.com/reteplus-algorithm-example/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Bala Subramanyam </span>Lanka</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">RetePlus Algorithm with Example – IBM ODM</h1> <p class="post-meta">June 4, 2016• Bala Subramanyam Lanka</p> <p class="post-tags"> <a href="/blog/2016"> <i class="fas fa-calendar fa-sm"></i> 2016 </a>   ·   <a href="/blog/tag/reteplus-algorithm"> <i class="fas fa-hashtag fa-sm"></i> reteplus-algorithm</a>     ·   <a href="/blog/category/algorithms"> <i class="fas fa-tag fa-sm"></i> Algorithms</a>   <a href="/blog/category/odm"> <i class="fas fa-tag fa-sm"></i> ODM</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>RetePlus algorithm is one of the <a href="http://www.balasubramanyamlanka.com/rule-engine-execution-modes/" rel="external nofollow noopener" target="_blank">execution modes</a> in IBM ODM which is based on <a href="http://www.balasubramanyamlanka.com/rete-algorithm/" rel="external nofollow noopener" target="_blank">Rete algorithm</a>. It works based on working memory, agenda creation, supports negative patterns, object notification, and Logical Objects. Use RetePlus optimization techniques to improve performance through reduction of the number of rules and conditions, computation of the rules to run, and prioritization of the rule order.</p> <h2 id="working-of-reteplus-algorithm">Working of RetePlus Algorithm</h2> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Working-of-RetePlus-Algorithm-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Working-of-RetePlus-Algorithm-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Working-of-RetePlus-Algorithm-1400.webp"></source> <img src="/assets/img/blog/Working-of-RetePlus-Algorithm.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="step-1">Step 1</h3> <p>First, all the objects are loaded into the working memory. We call these objects as working memory objects.</p> <h3 id="step-2">Step 2</h3> <p>Rule Engine matches the rules with working memory objects.</p> <h3 id="step-3">Step 3</h3> <p>During this Pattern matching process, RetePlus algorithm creates a network based on semantic relationships between rule condition tests.</p> <h3 id="step-4">Step 4</h3> <p>If a rule got matched with the working memory objects, then the rule instance is created and added to the Agenda.</p> <h5 id="1-then-based-on-the-ordering-properties-agenda-selects-the-rule-instance-to-trigger">1. Then based on the Ordering properties, agenda selects the rule instance to trigger.</h5> <h5 id="2-the-rule-action-of-the-rule-gets-triggered">2. The rule action of the rule gets triggered.</h5> <h5 id="3-when-the-rules-are-firing-sometimes-there-comes-a-situation-where-the-working-memory-objects-get-updated-the-rule-action-can-modify-the-working-memory-objects-in-the-following-way">3. When the rules are firing, sometimes there comes a situation where the working memory objects get updated. The rule action can modify the working memory objects in the following way:</h5> <ul> <li>By adding an object to the working memory</li> <li>By removing an object from the working memory</li> <li>By modifying the attributes of an existing object.</li> </ul> <h5 id="4-whenever-the-working-memory-objects-get-updated-then-rule-engine-repeats-the-pattern-matching-process">4. Whenever the working memory objects get updated, then rule engine repeats the pattern matching process.</h5> <h5 id="5-it-reassesses-matches-after-each-rule-instance-is-run-and-modifies-the-data-as-a-possible-consequence-the-list-of-rule-instances-in-the-agenda-can-change">5. It reassesses matches after each rule instance is run and modifies the data. As a possible consequence, the list of rule instances in the agenda can change.</h5> <h5 id="6-thus-this-algorithm-is-incremental-and-data-driven">6. Thus, this algorithm is incremental and data-driven.</h5> <h5 id="7-this-algorithm-is-based-on-an-inference-process-that-the-sequential-and-fastpath-algorithms-do-not-support-in-ibm-odm">7. This algorithm is based on an inference process that the sequential and FastPath algorithms do not support in IBM ODM.</h5> <h5 id="8-this-algorithm-had-five-main-sections-they-are">8. This algorithm had five main sections. They are:</h5> <ul> <li>Working Memory</li> <li>Agenda</li> <li>Negative Patterns</li> <li>Object Notifications</li> <li>Network Operation</li> </ul> <h2 id="working-memory">Working Memory</h2> <p>Each Rule engine in the Decision server is paired with a working memory. The working memory contains all the objects contained in the associated IlrContext object (base class of all the execution contexts. Rules can be executed only within an execution context.). You can modify the working memory by adding a statement in the <em class="ph i">action part of a rule</em> or by using the Application Programming Interface (API).</p> <p>Thus, the rule engine is aware of the objects that are in the working memory and any objects that are linked to them. The rule engine can use only objects that are accessible from the working memory. Use the following methods to manage the working memory:</p> <ol> <li>insert</li> <li>retract</li> <li>update</li> <li>updateContext</li> <li>enumerateObjects</li> <li>getObjects</li> </ol> <p>Check <a href="https://www.ibm.com/support/knowledgecenter/en/SSQP76_8.5.1/com.ibm.odm.dserver.rules.ref.res/html/api/html/ilog/rules/engine/IlrContext.html?view=embed#insert(java.lang.Object)" rel="external nofollow noopener" target="_blank">here</a> for better understanding of the methods given above.</p> <h3 id="agenda">Agenda</h3> <p>The agenda is where <span class="keyword">Decision Server</span> stores the rules whose patterns are all matched. Any rule that enters the agenda is said to be instantiated, it becomes a rule instance<em class="ph i">. </em></p> <p class="p"> The agenda stores rule instances that are eligible to be executed. If the agenda is empty, the execution has no effect. Rule instances placed in the agenda are said to be eligible. Often, in the agenda, several rules are eligible. Consequently, the rule engine has to have some way of deciding which particular rule in the agenda should be executed. </p> <h3 id="negative-patterns">Negative Patterns</h3> <p>Negative Patterns are used for expressing the non-existence of a particular type of objects in the working memory. Generally, positive patterns are checked with the objects present in the working memory, By using these negative patterns in this algorithm we can reduce checking for all the patterns with the objects available.</p> <p>For specifying the negative patterns in the working memory, we should use <strong><em>“not”</em></strong> keyword prior to the condition of the objects.</p> <h3 id="object-notifications">Object Notifications</h3> <p>We have four statements to control the individual operations of the objects in the working memory. Operations include – Object insertion, Object removal, Object Update and Attribute modification.</p> <h3 id="reteplus-network-operation">RetePlus network operation</h3> <p class="p"> The RetePlus network indexes rules so as to minimize the number of rules and conditions that need to be evaluated whenever the working memory is changed. The network minimizes the number of evaluations by sharing tests between rules and propagating changes incrementally. When all the tests have been completed, the network designates a rule. </p> <p class="p"> A RetePlus network can be represented as a graph composed of three zones: </p> <p class="p"> <span style="text-decoration: underline;"><strong>Discrimination tree</strong></span> </p> <p class="p"> A discrimination tree is a pattern-matching process that performs tests. These tests are represented by diamond shapes at the top of the network. The tests concern the classes of objects and the values of their attributes. Input to this tree consists of tokens representing each of the current objects in the working memory. When the pattern deals with only one object and its attributes, it is said to be a discrimination test. When it is a combination, it is called a join; these appear in the lower part of the graph. </p> <p class="p"> <span style="text-decoration: underline;"><strong>Alpha nodes</strong></span> </p> <p class="p"> An alpha node is formed at the next level of the network, for each token that passes the tests of the discrimination tree. Each node is composed of one or several tokens, represented by round-cornered rectangles (there are three alpha nodes in the figure). One alpha node contains two B-class tokens. The other two nodes contain only one class token each—A-class and C-class tokens, respectively. </p> <p class="p"> <span style="text-decoration: underline;"><strong>Tests and tuples</strong></span> </p> <p class="p"> The third zone of the network matches tokens of several classes of objects. The resulting nodes are known as tuples, which will be made up of several tokens. The equality test between attributes a2 and b3 gives rise to a node composed of two pairs of tokens, and the test between attributes b2 and c1 then filters out a triplet of tokens. In a RetePlus network, we often refer to tuples of this kind as join nodes. </p> <h2 id="reteplus-execution-example">RetePlus Execution Example</h2> <h6 id="lets-imagine-that-there-are-two-rules-as-shown-below">Let’s imagine that there are two rules as shown below.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/RetePlus-Example-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/RetePlus-Example-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/RetePlus-Example-1400.webp"></source> <img src="/assets/img/blog/RetePlus-Example.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h6 id="now-objects-are-loaded-into-the-working-memory">Now objects are loaded into the Working Memory.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Objects-are-loaded-into-Working-memory-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Objects-are-loaded-into-Working-memory-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Objects-are-loaded-into-Working-memory-1400.webp"></source> <img src="/assets/img/blog/Objects-are-loaded-into-Working-memory.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h6 id="now-pattern-matching-happens-and-if-rules-get-matched-with-the-objects-rule-instances-are-created-and-added-to-the-agenda">Now pattern matching happens and if rules get matched with the objects, rule instances are created and added to the agenda.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Agenda-gets-created-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Agenda-gets-created-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Agenda-gets-created-1400.webp"></source> <img src="/assets/img/blog/Agenda-gets-created.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h6 id="working-memory-objects-get-updated-with-new-values-that-got-fired-from-the-agenda">Working memory objects get updated with new values that got fired from the agenda.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Working-Memory-objects-get-updated-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Working-Memory-objects-get-updated-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Working-Memory-objects-get-updated-1400.webp"></source> <img src="/assets/img/blog/Working-Memory-objects-get-updated.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h6 id="rule-firing-continues">Rule firing continues.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Other-rules-in-agenda-continues-to-fire-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Other-rules-in-agenda-continues-to-fire-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Other-rules-in-agenda-continues-to-fire-1400.webp"></source> <img src="/assets/img/blog/Other-rules-in-agenda-continues-to-fire.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h6 id="in-the-end-when-no-rules-get-matched-with-the-working-memory-objects-rule-firing-stops">In the end, when no rules get matched with the Working memory objects, rule firing stops.</h6> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/blog/Agenda-and-Working-memory-in-the-end-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/blog/Agenda-and-Working-memory-in-the-end-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/blog/Agenda-and-Working-memory-in-the-end-1400.webp"></source> <img src="/assets/img/blog/Agenda-and-Working-memory-in-the-end.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="wrapping-up">Wrapping Up</h2> <p>Well, thats all about the RetePlus Algorithm! Feel free to comment your thoughts in the comments section below. Happy learning! Happy Exploring!!&lt;/li&gt; &lt;/ol&gt;</p> <h2 id="references">References</h2> <p><em><a href="https://www.ibm.com/support/knowledgecenter/SSQP76_8.5.1/com.ibm.odm.dserver.rules.designer.debug/optimizing_topics/tpc_opt_reteplusalgo.html" rel="external nofollow noopener" target="_blank">https://www.ibm.com/support/knowledgecenter/SSQP76_8.5.1/com.ibm.odm.dserver.rules.designer.debug/optimizing_topics/tpc_opt_reteplusalgo.html</a></em></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/a-lazy-programmer's-guide-to-configmaps-in-ocp-and-kubernetes-the-good,-the-bad,-and-the-configurable/">A Lazy Programmer's Guide to ConfigMaps in OCP and Kubernetes: The Good, The Bad, and The Configurable</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/understanding-keepAliveRestCallSec-vs-connectionTimeoutAlive-in-HTTP-requests/">Understanding keepAliveRestCallSec vs connectionTimeoutAlive in HTTP Requests</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/serializationfeature-in-objectmapper-with-code-examples/">SerializationFeature in ObjectMapper with Code Examples</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/understanding-network-timeouts-connectionRequestTimeout-connectionTimeout-socketTimeout/">Understanding Network Timeouts: connectionRequestTimeout, connectionTimeout, and socketTimeout</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/different-brms-tools-market/">Different BRMS Tools in Market</a> </li> </div> </div> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> © Copyright 2024 Bala Subramanyam Lanka. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>